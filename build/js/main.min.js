"use strict";document.addEventListener("DOMContentLoaded",function(){new SmoothScroll('a[href*="#"]',{speed:500});var e=document.querySelector(".overlay-login"),t=document.querySelector(".modal-login"),a=document.querySelector(".page-header__enter-link"),n=document.querySelector(".modal-login__btn-close"),o=document.querySelector("#login"),l=document.querySelector("#password"),r=document.querySelector("#login-form"),c=document.querySelector(".modal-login__password-btn");function u(){e.style.display="none",t.style.display="none",document.body.style.overflow="",o.value="",l.value=""}function i(e){var t=0,a=setInterval(function(){t++},200);c.addEventListener(e,function(){clearInterval(a),2<t&&("password"===l.getAttribute("type")?l.setAttribute("type","text"):"text"===l.getAttribute("type")&&l.setAttribute("type","password"),t=0)})}t&&(c.addEventListener("mousedown",function(){i("mouseup")}),c.addEventListener("touchstart",function(){i("touchend")}),a.addEventListener("click",function(){e.style.display="block",t.style.display="block",document.body.style.overflow="hidden",o.focus()}),n.addEventListener("click",u),r.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("Логин",o.value),localStorage.setItem("Пароль",l.value),u()}),document.addEventListener("keydown",function(e){27===e.keyCode&&(u(),_e())})),document.querySelector(".intro")&&new Swiper(".intro",{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:4e3},speed:700,loop:!0}).init();var s=document.querySelectorAll(".services__tab-item"),d=document.querySelectorAll(".services__block"),v=document.querySelector(".services");function p(){function a(e){for(var t=e;t<d.length;t++)d[t].classList.add("services__hide"),d[t].classList.remove("services__show"),s[t].classList.remove("services__tab-item--active")}a(1),s.forEach(function(e,t){e.addEventListener("click",function(){var e;a(0),d[e=t].classList.contains("services__hide")&&(d[e].classList.remove("services__hide"),d[e].classList.add("services__show"),s[e].classList.add("services__tab-item--active"))})})}var y=new Swiper(".services",{breakpoints:{320:{init:!0,pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"services__bullet",bulletActiveClass:"services__active-bullet"}},1024:{init:!1}}});function m(){window.matchMedia("(min-width: 1024px)").matches?(y.destroy(!1),p()):window.matchMedia("(max-width: 1024px)").matches&&y.init()}v&&(m(),window.addEventListener("resize",m));var _=document.querySelector(".calculator__select"),f=document.querySelector(".calculator__select-title"),g=document.querySelector(".calculator__select-list"),S=document.querySelector(".calculator__mortgage-container"),b=document.querySelector(".calculator__avto-container"),q=document.querySelector(".calculator__consumer-container"),h=document.querySelector(".calculator__offer-wrap"),L=document.querySelector(".credit-form"),k=document.querySelector("#target-form"),E=document.querySelector("#total-sum-form"),C=document.querySelector("#initial-pay-form"),x=document.querySelector("#period-form"),w=document.querySelector(".calculator__offer-column"),I=document.querySelector(".calculator__offer-sum-title"),D=document.querySelector(".calculator__offer-sum"),z=document.querySelector(".calculator__offer-percent"),O=document.querySelector(".calculator__offer-pay"),$=document.querySelector(".calculator__offer-required"),A=document.querySelector(".calculator__warning"),M=document.querySelector(".calculator__warning-title"),Z=document.querySelector(".calculator__fill-form"),F={modeCredit:null},j=[];function G(e){for(var t=0;t<j.length;t++)j[t].style.display="none";e.style.display="block",h.style.display="block",L.style.display="none"}j.push(S,b,q),function(){for(var e=0;e<j.length;e++)j[e].style.display="none";h.style.display="none",L.style.display="none"}(),f.addEventListener("click",function(e){e.stopPropagation(),_.classList.contains("calculator__select--active")?_.classList.remove("calculator__select--active"):(_.classList.add("calculator__select--active"),document.addEventListener("click",function(){_.classList.remove("calculator__select--active")}))}),g.addEventListener("click",function(e){switch(F.modeCredit=e.target.getAttribute("data-value"),f.textContent=e.target.textContent,F.modeCredit){case"mortgage":G(S),k.value="Ипотека",I.textContent="Сумма ипотеки",ue();break;case"avto":G(b),k.value="Автокредит",I.textContent="Сумму автокредита",Ie();break;case"consumer":G(q),k.value="Потребительский кредит",I.textContent="Сумму кредита",Ge()}});var P=1e5,R=47e4,V=5e5,H=15,B=100,J=S.querySelector(".calculator__input-total"),K=S.querySelector(".calculator__input-initial"),N=S.querySelector(".calculator__range-initial"),Q=S.querySelector(".calculator__input-period"),T=S.querySelector(".calculator__capital input"),U=S.querySelector(".calculator__pay-percent"),W=S.querySelector(".calculator__range-period"),X=S.querySelector(".calculator__btn-minus"),Y=S.querySelector(".calculator__btn-plus");function ee(e){var t=String(e).slice(-1);return"1"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубль":"2"===t||"3"===t||"4"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубля":String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рублей"}function te(e,t){var a=String(t).slice(-1),n=String(t).slice(-2);e.value="11"===n||"12"===n||"13"===n||"14"===n?String(t).replace(/^0+/,"")+" лет":"1"===a?String(t).replace(/^0+/,"")+" год":"2"===a||"3"===a||"4"===a?String(t).replace(/^0+/,"")+" года":String(t).replace(/^0+/,"")+" лет"}function ae(e){e.value=e.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),e.style.color="#1f1e25",e.style.borderColor="#1f1e25"}function ne(e,t,a,n,o){var l=parseInt(e.value.replace(/\D+/g,""),10);n<=l&&l<=o?(oe(l,t,a),e.style.color="#1f1e25",e.style.borderColor="#1f1e25",e.value=ee(l)):(e.value="Некорректное значение",e.style.color="red",e.style.borderColor="red")}function oe(e,t,a){var n=Math.round(e*t/B);a.value=ee(n)}function le(e,t,a,n){oe(parseInt(e.value.replace(/\D+/g,""),10),t.value,a),n.textContent=t.value+"%"}function re(e,t,a,n,o){var l=parseInt(e.value.replace(/\D+/g,""),10),r=parseInt(t.value.replace(/\D+/g,""),10),c=l*B/r;c<n||!l?(oe(r,n,e),a.value=n):B<c?(oe(r,B,e),a.value=B):(oe(r,c,e),a.value=c),o.textContent=a.value+"%"}function ce(e,t,a,n){var o=parseInt(e.value.replace(/\D+/g,""),10);o<a||!o?(e.value=a+" лет",t.value=a):n<o?(e.value=n+" лет",t.value=n):(te(e,o),t.value=o)}function ue(){var e,t,a=parseInt(J.value.replace(/\D+/g,""),10),n=parseInt(K.value.replace(/\D+/g,""),10),o=parseInt(N.value.replace(/\D+/g,""),10),l=parseInt(Q.value.replace(/\D+/g,""),10);(e=T.checked?a-n-R:a-n)<V?(w.style.display="none",A.style.display="block",M.textContent="Наш банк не выдаёт ипотечные кредиты меньше 500 000 рублей."):(w.style.display="block",A.style.display="none"),o<H?(t=9.4/1200,z.textContent="9,40%"):(t=8.5/1200,z.textContent="8,50%"),D.textContent=ee(e);var r=12*l,c=e*(t+t/(Math.pow(1+t,r)-1)),u=100*c/45;O.textContent=ee(c.toFixed()),$.textContent=ee(u.toFixed()),E.value=J.value,C.value=K.value,x.value=Q.value,je.style.display="flex"}J.addEventListener("input",function(){ae(J)}),J.addEventListener("change",function(){var e=N.value;ne(J,e,K,12e5,25e6)}),X.addEventListener("click",function(){var e=parseInt(J.value.replace(/\D+/g,""),10);13e5<=e&&(e-=P,J.value=ee(e),oe(e,N.value,K),ue())}),Y.addEventListener("click",function(){var e=parseInt(J.value.replace(/\D+/g,""),10);e<=249e5&&(e+=P,J.value=ee(e),oe(e,N.value,K),ue())}),K.addEventListener("input",function(){K.value=K.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),K.addEventListener("change",function(){re(K,J,N,10,U)}),N.addEventListener("change",function(){le(J,N,K,U)}),Q.addEventListener("input",function(){Q.value=Q.value.replace(/[^\d]/g,"")}),Q.addEventListener("change",function(){ce(Q,W,5,30)}),W.addEventListener("change",function(){var e=parseInt(W.value.replace(/\D+/g,""),10);te(Q,e)}),S.addEventListener("change",ue);var ie=document.querySelector(".credit-form__name-input"),se=document.querySelector(".credit-form__phone-input"),de=document.querySelector(".credit-form__email-input"),ve=document.querySelector(".credit-form form"),pe=document.querySelector(".modal-success"),ye=document.querySelector(".overlay-success"),me=document.querySelector(".modal-success__btn-close");Z.addEventListener("click",function(){L.style.display="block",ie.focus()});function _e(){pe.style.display="none",ye.style.display="none",document.body.style.overflow=""}ve&&(IMask(se,{mask:"+{7}(000)000-00-00"}),de.addEventListener("input",function(){var e=de.value.trim();!1===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)&&""!==e?de.setCustomValidity("Введите корректный E-mail"):de.setCustomValidity("")}),ve.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("ФИО",ie.value),localStorage.setItem("Телефон",se.value),localStorage.setItem("E-mail",de.value),ve.reset(),L.style.display="none",pe.style.display="block",ye.style.display="block",document.body.style.overflow="hidden"}),me.addEventListener("click",_e));var fe=2e5,ge=2e6,Se=b.querySelector(".calculator__input-total"),be=b.querySelector(".calculator__input-initial"),qe=b.querySelector(".calculator__range-initial"),he=b.querySelector(".calculator__input-period"),Le=b.querySelector(".calculator__range-period"),ke=b.querySelector(".calculator__pay-percent"),Ee=b.querySelector(".calculator__btn-minus"),Ce=b.querySelector(".calculator__btn-plus"),xe=b.querySelector(".calculator__kasko input"),we=b.querySelector(".calculator__insurance input");function Ie(){var e,t=parseInt(Se.value.replace(/\D+/g,""),10),a=parseInt(be.value.replace(/\D+/g,""),10),n=parseInt(he.value.replace(/\D+/g,""),10),o=t-a;o<fe?(w.style.display="none",A.style.display="block",M.textContent="Наш банк не выдаёт автокредиты кредиты меньше 200 000 рублей."):(w.style.display="block",A.style.display="none"),xe.checked&&we.checked?(e=3.5/1200,z.textContent="3,5%"):xe.checked||we.checked?(e=8.5/1200,z.textContent="8,5%"):t<ge?(e=16/1200,z.textContent="16%"):(e=.0125,z.textContent="15%"),D.textContent=ee(o);var l=12*n,r=o*(e+e/(Math.pow(1+e,l)-1)),c=100*r/45;O.textContent=ee(r.toFixed()),$.textContent=ee(c.toFixed()),E.value=Se.value,C.value=be.value,x.value=he.value,je.style.display="flex"}Se.addEventListener("input",function(){ae(Se)}),Se.addEventListener("change",function(){var e=qe.value;ne(Se,e,be,5e5,5e6)}),Ee.addEventListener("click",function(){var e=parseInt(Se.value.replace(/\D+/g,""),10);55e4<=e&&(e-=5e4,Se.value=ee(e),oe(e,qe.value,be),Ie())}),Ce.addEventListener("click",function(){var e=parseInt(Se.value.replace(/\D+/g,""),10);e<=495e4&&(e+=5e4,Se.value=ee(e),oe(e,qe.value,be),Ie())}),be.addEventListener("input",function(){be.value=be.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),be.addEventListener("change",function(){re(be,Se,qe,20,ke)}),qe.addEventListener("change",function(){le(Se,qe,be,ke)}),he.addEventListener("input",function(){he.value=he.value.replace(/[^\d]/g,"")}),he.addEventListener("change",function(){ce(he,Le,1,5)}),Le.addEventListener("change",function(){var e=parseInt(Le.value.replace(/\D+/g,""),10);te(he,e)}),b.addEventListener("change",Ie);var De=75e4,ze=2e6,Oe=q.querySelector(".calculator__input-total"),$e=q.querySelector(".calculator__input-period"),Ae=q.querySelector(".calculator__range-period"),Me=q.querySelector(".calculator__btn-minus"),Ze=q.querySelector(".calculator__btn-plus"),Fe=q.querySelector(".calculator__participant input"),je=document.querySelector(".credit-form__initial-item");function Ge(){var e,t=parseInt(Oe.value.replace(/\D+/g,""),10),a=parseInt($e.value.replace(/\D+/g,""),10);if(t<De?(e=15,z.textContent="15%"):De<=t&&t<ze?(e=12.5,z.textContent="12,5%"):(e=9.5,z.textContent="9,5%"),Fe.checked){var n=(e-=.5)+"%";z.textContent=n.replace(".",",")}e/=1200,D.textContent=ee(t);var o=12*a,l=t*(e+e/(Math.pow(1+e,o)-1)),r=100*l/45;O.textContent=ee(l.toFixed()),$.textContent=ee(r.toFixed()),E.value=Oe.value,x.value=$e.value,je.style.display="none"}Oe.addEventListener("input",function(){ae(Oe)}),Oe.addEventListener("change",function(){var e=parseInt(Oe.value.replace(/\D+/g,""),10);5e4<=e&&e<=3e6?(Oe.style.color="#1f1e25",Oe.style.borderColor="#1f1e25",Oe.value=ee(e)):(Oe.value="Некорректное значение",Oe.style.color="red",Oe.style.borderColor="red")}),Me.addEventListener("click",function(){var e=parseInt(Oe.value.replace(/\D+/g,""),10);1e5<=e&&(e-=5e4,Oe.value=ee(e),Ge())}),Ze.addEventListener("click",function(){var e=parseInt(Oe.value.replace(/\D+/g,""),10);e<=295e4&&(e+=5e4,Oe.value=ee(e),Ge())}),$e.addEventListener("input",function(){$e.value=$e.value.replace(/[^\d]/g,"")}),$e.addEventListener("change",function(){ce($e,Ae,1,7)}),Ae.addEventListener("change",function(){var e=parseInt(Ae.value.replace(/\D+/g,""),10);te($e,e)}),q.addEventListener("change",Ge);var Pe=document.querySelector("#russia"),Re=document.querySelector("#sng"),Ve=document.querySelector("#europe"),He=document.querySelector(".departments__filter-form");ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.45,37.36],zoom:3,controls:[]}),t=ymaps.templateLayoutFactory.createClass('<div><button type="button" id="zoom-in" class="departments__btn-zoom departments__btn-zoom-in">+</button><button type="button" id="zoom-out" class="departments__btn-zoom departments__btn-zoom-out">-</buton></div>',{build:function(){t.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),document.querySelector("#zoom-in").addEventListener("click",this.zoomInCallback),document.querySelector("#zoom-out").addEventListener("click",this.zoomOutCallback)},clear:function(){document.querySelector("#zoom-in").removeEventListener("click",this.zoomInCallback),document.querySelector("#zoom-out").removeEventListener("click",this.zoomOutCallback),t.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}}),a=new ymaps.control.ZoomControl({options:{layout:t}});e.controls.add(a,{position:{top:170,right:10}});var n=ymaps.templateLayoutFactory.createClass('<button type="button" id="geo-location" class="departments__geo-location" aria-label="Показать мое местоположение"></button>',{}),o=new ymaps.control.GeolocationControl({options:{layout:n}});e.controls.add(o,{position:{top:250,right:10}});function l(e){for(var t=new ymaps.GeoObjectCollection({},{iconLayout:"default#image",iconImageHref:"img/marker.png"}),a=0;a<e.length;a++)t.add(new ymaps.Placemark(e[a]));return t}var r=l([[55.75,37.61],[59.93,30.31],[51.54,46],[67.61,33.66],[57.15,65.53],[54.99,73.36]]),c=l([[40.36,49.83],[41.31,69.27],[53.9,27.56],[43.23,76.94]]),u=l([[48.85,2.35],[50.08,14.42],[51.5,-.12],[41.9,12.49]]);function i(){Pe.checked?e.geoObjects.add(r):e.geoObjects.remove(r),Re.checked?e.geoObjects.add(c):e.geoObjects.remove(c),Ve.checked?e.geoObjects.add(u):e.geoObjects.remove(u)}i(),He.addEventListener("change",i)})});
//# sourceMappingURL=main.min.js.map
