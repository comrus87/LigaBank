"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".overlay-login"),t=document.querySelector(".modal-login"),a=document.querySelector(".page-header__enter-link"),n=document.querySelector(".modal-login__btn-close"),l=document.querySelector("#login"),r=document.querySelector("#password"),c=document.querySelector("#login-form"),o=document.querySelector(".modal-login__password-btn");function u(){e.style.display="none",t.style.display="none",document.body.style.overflow="",l.value="",r.value=""}t&&(o.addEventListener("mousedown",function(){var e=0,t=setInterval(function(){e++},200);o.addEventListener("mouseup",function(){clearInterval(t),2<e&&("password"===r.getAttribute("type")?r.setAttribute("type","text"):"text"===r.getAttribute("type")&&r.setAttribute("type","password"),e=0)})}),a.addEventListener("click",function(){e.style.display="block",t.style.display="block",document.body.style.overflow="hidden",l.focus()}),n.addEventListener("click",u),c.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("Логин",l.value),localStorage.setItem("Пароль",r.value),u()}),document.addEventListener("keydown",function(e){27===e.keyCode&&(u(),_e())})),document.querySelector(".intro")&&new Swiper(".intro",{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:4e3},speed:700}).init();var i=document.querySelectorAll(".services__tab-item"),d=document.querySelectorAll(".services__block"),s=document.querySelector(".services");function v(){function a(e){for(var t=e;t<d.length;t++)d[t].classList.add("services__hide"),d[t].classList.remove("services__show"),i[t].classList.remove("services__tab-item--active")}a(1),i.forEach(function(e,t){e.addEventListener("click",function(){var e;a(0),d[e=t].classList.contains("services__hide")&&(d[e].classList.remove("services__hide"),d[e].classList.add("services__show"),i[e].classList.add("services__tab-item--active"))})})}var p=new Swiper(".services",{breakpoints:{320:{init:!0,pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"services__bullet",bulletActiveClass:"services__active-bullet"}},1024:{init:!1}}});function y(){window.matchMedia("(min-width: 1024px)").matches?(p.destroy(!1),v()):window.matchMedia("(max-width: 1024px)").matches&&p.init()}s&&(y(),window.addEventListener("resize",y));var _=document.querySelector(".calculator__select"),m=document.querySelector(".calculator__select-title"),f=document.querySelector(".calculator__select-list"),g=document.querySelector(".calculator__mortgage-container"),S=document.querySelector(".calculator__avto-container"),q=document.querySelector(".calculator__consumer-container"),L=document.querySelector(".calculator__offer-wrap"),b=document.querySelector(".credit-form"),E=document.querySelector("#target-form"),h=document.querySelector("#total-sum-form"),k=document.querySelector("#initial-pay-form"),C=document.querySelector("#period-form"),x=document.querySelector(".calculator__offer-column"),w=document.querySelector(".calculator__offer-sum-title"),I=document.querySelector(".calculator__offer-sum"),D=document.querySelector(".calculator__offer-percent"),$=document.querySelector(".calculator__offer-pay"),A=document.querySelector(".calculator__offer-required"),M=document.querySelector(".calculator__warning"),F=document.querySelector(".calculator__warning-title"),z=document.querySelector(".calculator__fill-form"),Z={modeCredit:null},V=[];function O(e){for(var t=0;t<V.length;t++)V[t].style.display="none";e.style.display="block",L.style.display="block",b.style.display="none"}V.push(g,S,q),function(){for(var e=0;e<V.length;e++)V[e].style.display="none";L.style.display="none",b.style.display="none"}(),m.addEventListener("click",function(e){e.stopPropagation(),_.classList.contains("calculator__select--active")?_.classList.remove("calculator__select--active"):(_.classList.add("calculator__select--active"),document.addEventListener("click",function(){_.classList.remove("calculator__select--active")}))}),f.addEventListener("click",function(e){switch(Z.modeCredit=e.target.getAttribute("data-value"),m.textContent=e.target.textContent,Z.modeCredit){case"mortgage":O(g),E.value="Ипотека",w.textContent="Сумма ипотеки",oe();break;case"avto":O(S),E.value="Автокредит",w.textContent="Сумму автокредита",we();break;case"consumer":O(q),E.value="Потребительский кредит",w.textContent="Сумму кредита",Ve()}});var P=1e5,j=47e4,B=5e5,G=15,H=100,J=g.querySelector(".calculator__input-total"),K=g.querySelector(".calculator__input-initial"),N=g.querySelector(".calculator__range-initial"),Q=g.querySelector(".calculator__input-period"),R=g.querySelector(".calculator__capital input"),T=g.querySelector(".calculator__pay-percent"),U=g.querySelector(".calculator__range-period"),W=g.querySelector(".calculator__btn-minus"),X=g.querySelector(".calculator__btn-plus");function Y(e){var t=String(e).slice(-1);return"1"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубль":"2"===t||"3"===t||"4"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубля":String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рублей"}function ee(e,t){var a=String(t).slice(-1),n=String(t).slice(-2);e.value="11"===n||"12"===n||"13"===n||"14"===n?String(t).replace(/^0+/,"")+" лет":"1"===a?String(t).replace(/^0+/,"")+" год":"2"===a||"3"===a||"4"===a?String(t).replace(/^0+/,"")+" года":String(t).replace(/^0+/,"")+" лет"}function te(e){e.value=e.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),e.style.color="#1f1e25",e.style.borderColor="#1f1e25"}function ae(e,t,a,n,l){var r=parseInt(e.value.replace(/\D+/g,""),10);n<=r&&r<=l?(ne(r,t,a),e.style.color="#1f1e25",e.style.borderColor="#1f1e25",e.value=Y(r)):(e.value="Некорректное значение",e.style.color="red",e.style.borderColor="red")}function ne(e,t,a){var n=Math.round(e*t/H);a.value=Y(n)}function le(e,t,a,n){ne(parseInt(e.value.replace(/\D+/g,""),10),t.value,a),n.textContent=t.value+"%"}function re(e,t,a,n,l){var r=parseInt(e.value.replace(/\D+/g,""),10),c=parseInt(t.value.replace(/\D+/g,""),10),o=r*H/c;o<n||!r?(ne(c,n,e),a.value=n):H<o?(ne(c,H,e),a.value=H):(ne(c,o,e),a.value=o),l.textContent=a.value+"%"}function ce(e,t,a,n){var l=parseInt(e.value.replace(/\D+/g,""),10);l<a||!l?(e.value=a+" лет",t.value=a):n<l?(e.value=n+" лет",t.value=n):(ee(e,l),t.value=l)}function oe(){var e,t,a=parseInt(J.value.replace(/\D+/g,""),10),n=parseInt(K.value.replace(/\D+/g,""),10),l=parseInt(N.value.replace(/\D+/g,""),10),r=parseInt(Q.value.replace(/\D+/g,""),10);(e=R.checked?a-n-j:a-n)<B?(x.style.display="none",M.style.display="block",F.textContent="Наш банк не выдаёт ипотечные кредиты меньше 500 000 рублей."):(x.style.display="block",M.style.display="none"),l<G?(t=9.4/1200,D.textContent="9,40%"):(t=8.5/1200,D.textContent="8,50%"),I.textContent=Y(e);var c=12*r,o=e*(t+t/(Math.pow(1+t,c)-1)),u=100*o/45;$.textContent=Y(o.toFixed()),A.textContent=Y(u.toFixed()),h.value=J.value,k.value=K.value,C.value=Q.value}J.addEventListener("input",function(){te(J)}),J.addEventListener("change",function(){var e=N.value;ae(J,e,K,12e5,25e6)}),W.addEventListener("click",function(){var e=parseInt(J.value.replace(/\D+/g,""),10);13e5<=e&&(e-=P,J.value=Y(e),ne(e,N.value,K),oe())}),X.addEventListener("click",function(){var e=parseInt(J.value.replace(/\D+/g,""),10);e<=249e5&&(e+=P,J.value=Y(e),ne(e,N.value,K),oe())}),K.addEventListener("input",function(){K.value=K.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),K.addEventListener("change",function(){re(K,J,N,10,T)}),N.addEventListener("change",function(){le(J,N,K,T)}),Q.addEventListener("input",function(){Q.value=Q.value.replace(/[^\d]/g,"")}),Q.addEventListener("change",function(){ce(Q,U,5,30)}),U.addEventListener("change",function(){var e=parseInt(U.value.replace(/\D+/g,""),10);ee(Q,e)}),g.addEventListener("change",oe);var ue=document.querySelector(".credit-form__name-input"),ie=document.querySelector(".credit-form__phone-input"),de=document.querySelector(".credit-form__email-input"),se=document.querySelector(".credit-form form"),ve=document.querySelector(".modal-success"),pe=document.querySelector(".overlay-success"),ye=document.querySelector(".modal-success__btn-close");z.addEventListener("click",function(){b.style.display="block",ue.focus()});function _e(){ve.style.display="none",pe.style.display="none",document.body.style.overflow=""}se&&(IMask(ie,{mask:"+{7}(000)000-00-00"}),de.addEventListener("input",function(){var e=de.value.trim();!1===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)&&""!==e?de.setCustomValidity("Введите корректный E-mail"):de.setCustomValidity("")}),se.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("ФИО",ue.value),localStorage.setItem("Телефон",ie.value),localStorage.setItem("E-mail",de.value),se.reset(),b.style.display="none",ve.style.display="block",pe.style.display="block",document.body.style.overflow="hidden"}),ye.addEventListener("click",_e));var me=2e5,fe=2e6,ge=S.querySelector(".calculator__input-total"),Se=S.querySelector(".calculator__input-initial"),qe=S.querySelector(".calculator__range-initial"),Le=S.querySelector(".calculator__input-period"),be=S.querySelector(".calculator__range-period"),Ee=S.querySelector(".calculator__pay-percent"),he=S.querySelector(".calculator__btn-minus"),ke=S.querySelector(".calculator__btn-plus"),Ce=S.querySelector(".calculator__kasko input"),xe=S.querySelector(".calculator__insurance input");function we(){var e,t=parseInt(ge.value.replace(/\D+/g,""),10),a=parseInt(Se.value.replace(/\D+/g,""),10),n=parseInt(Le.value.replace(/\D+/g,""),10),l=t-a;l<me?(x.style.display="none",M.style.display="block",F.textContent="Наш банк не выдаёт автокредиты кредиты меньше 200 000 рублей."):(x.style.display="block",M.style.display="none"),Ce.checked&&xe.checked?(e=3.5/1200,D.textContent="3,5%"):Ce.checked||xe.checked?(e=8.5/1200,D.textContent="8,5%"):t<fe?(e=16/1200,D.textContent="16%"):(e=.0125,D.textContent="15%"),I.textContent=Y(l);var r=12*n,c=l*(e+e/(Math.pow(1+e,r)-1)),o=100*c/45;$.textContent=Y(c.toFixed()),A.textContent=Y(o.toFixed()),h.value=ge.value,k.value=Se.value,C.value=Le.value}ge.addEventListener("input",function(){te(ge)}),ge.addEventListener("change",function(){var e=qe.value;ae(ge,e,Se,5e5,5e6)}),he.addEventListener("click",function(){var e=parseInt(ge.value.replace(/\D+/g,""),10);55e4<=e&&(e-=5e4,ge.value=Y(e),ne(e,qe.value,Se),we())}),ke.addEventListener("click",function(){var e=parseInt(ge.value.replace(/\D+/g,""),10);e<=495e4&&(e+=5e4,ge.value=Y(e),ne(e,qe.value,Se),we())}),Se.addEventListener("input",function(){Se.value=Se.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),Se.addEventListener("change",function(){re(Se,ge,qe,20,Ee)}),qe.addEventListener("change",function(){le(ge,qe,Se,Ee)}),Le.addEventListener("input",function(){Le.value=Le.value.replace(/[^\d]/g,"")}),Le.addEventListener("change",function(){ce(Le,be,1,5)}),be.addEventListener("change",function(){var e=parseInt(be.value.replace(/\D+/g,""),10);ee(Le,e)}),S.addEventListener("change",we);var Ie=75e4,De=2e6,$e=q.querySelector(".calculator__input-total"),Ae=q.querySelector(".calculator__input-period"),Me=q.querySelector(".calculator__range-period"),Fe=q.querySelector(".calculator__btn-minus"),ze=q.querySelector(".calculator__btn-plus"),Ze=q.querySelector(".calculator__participant input");function Ve(){var e,t=parseInt($e.value.replace(/\D+/g,""),10),a=parseInt(Ae.value.replace(/\D+/g,""),10);if(t<Ie?(e=15,D.textContent="15%"):Ie<=t&&t<De?(e=12.5,D.textContent="12,5%"):(e=9.5,D.textContent="9,5%"),Ze.checked){var n=(e-=.5)+"%";D.textContent=n.replace(".",",")}e/=1200,I.textContent=Y(t);var l=12*a,r=t*(e+e/(Math.pow(1+e,l)-1)),c=100*r/45;$.textContent=Y(r.toFixed()),A.textContent=Y(c.toFixed()),h.value=$e.value,k.value="отсутствует",C.value=Ae.value}$e.addEventListener("input",function(){te($e)}),$e.addEventListener("change",function(){var e=parseInt($e.value.replace(/\D+/g,""),10);5e4<=e&&e<=3e6?($e.style.color="#1f1e25",$e.style.borderColor="#1f1e25",$e.value=Y(e)):($e.value="Некорректное значение",$e.style.color="red",$e.style.borderColor="red")}),Fe.addEventListener("click",function(){var e=parseInt($e.value.replace(/\D+/g,""),10);1e5<=e&&(e-=5e4,$e.value=Y(e),Ve())}),ze.addEventListener("click",function(){var e=parseInt($e.value.replace(/\D+/g,""),10);e<=295e4&&(e+=5e4,$e.value=Y(e),Ve())}),Ae.addEventListener("input",function(){Ae.value=Ae.value.replace(/[^\d]/g,"")}),Ae.addEventListener("change",function(){ce(Ae,Me,1,7)}),Me.addEventListener("change",function(){var e=parseInt(Me.value.replace(/\D+/g,""),10);ee(Ae,e)}),q.addEventListener("change",Ve)});
//# sourceMappingURL=main.min.js.map
