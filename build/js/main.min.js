"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".overlay-login"),t=document.querySelector(".modal-login"),a=document.querySelector(".page-header__enter-link"),n=document.querySelector(".modal-login__btn-close"),l=document.querySelector("#login"),c=document.querySelector("#password"),o=document.querySelector("#login-form"),r=document.querySelector(".modal-login__password-btn");function u(){e.style.display="none",t.style.display="none",document.body.style.overflow="",l.value="",c.value=""}t&&(r.addEventListener("mousedown",function(){var e=0,t=setInterval(function(){e++},200);r.addEventListener("mouseup",function(){clearInterval(t),2<e&&("password"===c.getAttribute("type")?c.setAttribute("type","text"):"text"===c.getAttribute("type")&&c.setAttribute("type","password"),e=0)})}),a.addEventListener("click",function(){e.style.display="block",t.style.display="block",document.body.style.overflow="hidden",l.focus()}),n.addEventListener("click",u),o.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("Логин",l.value),localStorage.setItem("Пароль",c.value),u()}),document.addEventListener("keydown",function(e){27===e.keyCode&&(u(),me())})),document.querySelector(".intro")&&new Swiper(".intro",{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:4e3},speed:700}).init();var i=document.querySelectorAll(".services__tab-item"),s=document.querySelectorAll(".services__block"),d=document.querySelector(".services");function v(){function a(e){for(var t=e;t<s.length;t++)s[t].classList.add("services__hide"),s[t].classList.remove("services__show"),i[t].classList.remove("services__tab-item--active")}a(1),i.forEach(function(e,t){e.addEventListener("click",function(){var e;a(0),s[e=t].classList.contains("services__hide")&&(s[e].classList.remove("services__hide"),s[e].classList.add("services__show"),i[e].classList.add("services__tab-item--active"))})})}var p=new Swiper(".services",{breakpoints:{320:{init:!0,pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"services__bullet",bulletActiveClass:"services__active-bullet"}},1024:{init:!1}}});function y(){window.matchMedia("(min-width: 1024px)").matches?(p.destroy(!1),v()):window.matchMedia("(max-width: 1024px)").matches&&p.init()}d&&(y(),window.addEventListener("resize",y));var m=document.querySelector(".calculator__select"),_=document.querySelector(".calculator__select-title"),g=document.querySelector(".calculator__select-list"),f=document.querySelector(".calculator__mortgage-container"),S=document.querySelector(".calculator__avto-container"),b=document.querySelector(".calculator__consumer-container"),q=document.querySelector(".calculator__offer-wrap"),h=document.querySelector(".credit-form"),k=document.querySelector("#target-form"),L=document.querySelector("#total-sum-form"),C=document.querySelector("#initial-pay-form"),E=document.querySelector("#period-form"),x=document.querySelector(".calculator__offer-column"),I=document.querySelector(".calculator__offer-sum-title"),w=document.querySelector(".calculator__offer-sum"),D=document.querySelector(".calculator__offer-percent"),z=document.querySelector(".calculator__offer-pay"),O=document.querySelector(".calculator__offer-required"),$=document.querySelector(".calculator__warning"),A=document.querySelector(".calculator__warning-title"),M=document.querySelector(".calculator__fill-form"),Z={modeCredit:null},j=[];function F(e){for(var t=0;t<j.length;t++)j[t].style.display="none";e.style.display="block",q.style.display="block",h.style.display="none"}j.push(f,S,b),function(){for(var e=0;e<j.length;e++)j[e].style.display="none";q.style.display="none",h.style.display="none"}(),_.addEventListener("click",function(e){e.stopPropagation(),m.classList.contains("calculator__select--active")?m.classList.remove("calculator__select--active"):(m.classList.add("calculator__select--active"),document.addEventListener("click",function(){m.classList.remove("calculator__select--active")}))}),g.addEventListener("click",function(e){switch(Z.modeCredit=e.target.getAttribute("data-value"),_.textContent=e.target.textContent,Z.modeCredit){case"mortgage":F(f),k.value="Ипотека",I.textContent="Сумма ипотеки",re();break;case"avto":F(S),k.value="Автокредит",I.textContent="Сумму автокредита",Ie();break;case"consumer":F(b),k.value="Потребительский кредит",I.textContent="Сумму кредита",je()}});var P=1e5,R=47e4,V=5e5,G=15,H=100,B=f.querySelector(".calculator__input-total"),J=f.querySelector(".calculator__input-initial"),K=f.querySelector(".calculator__range-initial"),N=f.querySelector(".calculator__input-period"),Q=f.querySelector(".calculator__capital input"),T=f.querySelector(".calculator__pay-percent"),U=f.querySelector(".calculator__range-period"),W=f.querySelector(".calculator__btn-minus"),X=f.querySelector(".calculator__btn-plus");function Y(e){var t=String(e).slice(-1);return"1"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубль":"2"===t||"3"===t||"4"===t?String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рубля":String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ").replace(/^0+/,"")+" рублей"}function ee(e,t){var a=String(t).slice(-1),n=String(t).slice(-2);e.value="11"===n||"12"===n||"13"===n||"14"===n?String(t).replace(/^0+/,"")+" лет":"1"===a?String(t).replace(/^0+/,"")+" год":"2"===a||"3"===a||"4"===a?String(t).replace(/^0+/,"")+" года":String(t).replace(/^0+/,"")+" лет"}function te(e){e.value=e.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),e.style.color="#1f1e25",e.style.borderColor="#1f1e25"}function ae(e,t,a,n,l){var c=parseInt(e.value.replace(/\D+/g,""),10);n<=c&&c<=l?(ne(c,t,a),e.style.color="#1f1e25",e.style.borderColor="#1f1e25",e.value=Y(c)):(e.value="Некорректное значение",e.style.color="red",e.style.borderColor="red")}function ne(e,t,a){var n=Math.round(e*t/H);a.value=Y(n)}function le(e,t,a,n){ne(parseInt(e.value.replace(/\D+/g,""),10),t.value,a),n.textContent=t.value+"%"}function ce(e,t,a,n,l){var c=parseInt(e.value.replace(/\D+/g,""),10),o=parseInt(t.value.replace(/\D+/g,""),10),r=c*H/o;r<n||!c?(ne(o,n,e),a.value=n):H<r?(ne(o,H,e),a.value=H):(ne(o,r,e),a.value=r),l.textContent=a.value+"%"}function oe(e,t,a,n){var l=parseInt(e.value.replace(/\D+/g,""),10);l<a||!l?(e.value=a+" лет",t.value=a):n<l?(e.value=n+" лет",t.value=n):(ee(e,l),t.value=l)}function re(){var e,t,a=parseInt(B.value.replace(/\D+/g,""),10),n=parseInt(J.value.replace(/\D+/g,""),10),l=parseInt(K.value.replace(/\D+/g,""),10),c=parseInt(N.value.replace(/\D+/g,""),10);(e=Q.checked?a-n-R:a-n)<V?(x.style.display="none",$.style.display="block",A.textContent="Наш банк не выдаёт ипотечные кредиты меньше 500 000 рублей."):(x.style.display="block",$.style.display="none"),l<G?(t=9.4/1200,D.textContent="9,40%"):(t=8.5/1200,D.textContent="8,50%"),w.textContent=Y(e);var o=12*c,r=e*(t+t/(Math.pow(1+t,o)-1)),u=100*r/45;z.textContent=Y(r.toFixed()),O.textContent=Y(u.toFixed()),L.value=B.value,C.value=J.value,E.value=N.value}B.addEventListener("input",function(){te(B)}),B.addEventListener("change",function(){var e=K.value;ae(B,e,J,12e5,25e6)}),W.addEventListener("click",function(){var e=parseInt(B.value.replace(/\D+/g,""),10);13e5<=e&&(e-=P,B.value=Y(e),ne(e,K.value,J),re())}),X.addEventListener("click",function(){var e=parseInt(B.value.replace(/\D+/g,""),10);e<=249e5&&(e+=P,B.value=Y(e),ne(e,K.value,J),re())}),J.addEventListener("input",function(){J.value=J.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),J.addEventListener("change",function(){ce(J,B,K,10,T)}),K.addEventListener("change",function(){le(B,K,J,T)}),N.addEventListener("input",function(){N.value=N.value.replace(/[^\d]/g,"")}),N.addEventListener("change",function(){oe(N,U,5,30)}),U.addEventListener("change",function(){var e=parseInt(U.value.replace(/\D+/g,""),10);ee(N,e)}),f.addEventListener("change",re);var ue=document.querySelector(".credit-form__name-input"),ie=document.querySelector(".credit-form__phone-input"),se=document.querySelector(".credit-form__email-input"),de=document.querySelector(".credit-form form"),ve=document.querySelector(".modal-success"),pe=document.querySelector(".overlay-success"),ye=document.querySelector(".modal-success__btn-close");M.addEventListener("click",function(){h.style.display="block",ue.focus()});function me(){ve.style.display="none",pe.style.display="none",document.body.style.overflow=""}de&&(IMask(ie,{mask:"+{7}(000)000-00-00"}),se.addEventListener("input",function(){var e=se.value.trim();!1===/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)&&""!==e?se.setCustomValidity("Введите корректный E-mail"):se.setCustomValidity("")}),de.addEventListener("submit",function(e){e.preventDefault(),localStorage.setItem("ФИО",ue.value),localStorage.setItem("Телефон",ie.value),localStorage.setItem("E-mail",se.value),de.reset(),h.style.display="none",ve.style.display="block",pe.style.display="block",document.body.style.overflow="hidden"}),ye.addEventListener("click",me));var _e=2e5,ge=2e6,fe=S.querySelector(".calculator__input-total"),Se=S.querySelector(".calculator__input-initial"),be=S.querySelector(".calculator__range-initial"),qe=S.querySelector(".calculator__input-period"),he=S.querySelector(".calculator__range-period"),ke=S.querySelector(".calculator__pay-percent"),Le=S.querySelector(".calculator__btn-minus"),Ce=S.querySelector(".calculator__btn-plus"),Ee=S.querySelector(".calculator__kasko input"),xe=S.querySelector(".calculator__insurance input");function Ie(){var e,t=parseInt(fe.value.replace(/\D+/g,""),10),a=parseInt(Se.value.replace(/\D+/g,""),10),n=parseInt(qe.value.replace(/\D+/g,""),10),l=t-a;l<_e?(x.style.display="none",$.style.display="block",A.textContent="Наш банк не выдаёт автокредиты кредиты меньше 200 000 рублей."):(x.style.display="block",$.style.display="none"),Ee.checked&&xe.checked?(e=3.5/1200,D.textContent="3,5%"):Ee.checked||xe.checked?(e=8.5/1200,D.textContent="8,5%"):t<ge?(e=16/1200,D.textContent="16%"):(e=.0125,D.textContent="15%"),w.textContent=Y(l);var c=12*n,o=l*(e+e/(Math.pow(1+e,c)-1)),r=100*o/45;z.textContent=Y(o.toFixed()),O.textContent=Y(r.toFixed()),L.value=fe.value,C.value=Se.value,E.value=qe.value}fe.addEventListener("input",function(){te(fe)}),fe.addEventListener("change",function(){var e=be.value;ae(fe,e,Se,5e5,5e6)}),Le.addEventListener("click",function(){var e=parseInt(fe.value.replace(/\D+/g,""),10);55e4<=e&&(e-=5e4,fe.value=Y(e),ne(e,be.value,Se),Ie())}),Ce.addEventListener("click",function(){var e=parseInt(fe.value.replace(/\D+/g,""),10);e<=495e4&&(e+=5e4,fe.value=Y(e),ne(e,be.value,Se),Ie())}),Se.addEventListener("input",function(){Se.value=Se.value.replace(/[^\d]/g,"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}),Se.addEventListener("change",function(){ce(Se,fe,be,20,ke)}),be.addEventListener("change",function(){le(fe,be,Se,ke)}),qe.addEventListener("input",function(){qe.value=qe.value.replace(/[^\d]/g,"")}),qe.addEventListener("change",function(){oe(qe,he,1,5)}),he.addEventListener("change",function(){var e=parseInt(he.value.replace(/\D+/g,""),10);ee(qe,e)}),S.addEventListener("change",Ie);var we=75e4,De=2e6,ze=b.querySelector(".calculator__input-total"),Oe=b.querySelector(".calculator__input-period"),$e=b.querySelector(".calculator__range-period"),Ae=b.querySelector(".calculator__btn-minus"),Me=b.querySelector(".calculator__btn-plus"),Ze=b.querySelector(".calculator__participant input");function je(){var e,t=parseInt(ze.value.replace(/\D+/g,""),10),a=parseInt(Oe.value.replace(/\D+/g,""),10);if(t<we?(e=15,D.textContent="15%"):we<=t&&t<De?(e=12.5,D.textContent="12,5%"):(e=9.5,D.textContent="9,5%"),Ze.checked){var n=(e-=.5)+"%";D.textContent=n.replace(".",",")}e/=1200,w.textContent=Y(t);var l=12*a,c=t*(e+e/(Math.pow(1+e,l)-1)),o=100*c/45;z.textContent=Y(c.toFixed()),O.textContent=Y(o.toFixed()),L.value=ze.value,C.value="0",E.value=Oe.value}ze.addEventListener("input",function(){te(ze)}),ze.addEventListener("change",function(){var e=parseInt(ze.value.replace(/\D+/g,""),10);5e4<=e&&e<=3e6?(ze.style.color="#1f1e25",ze.style.borderColor="#1f1e25",ze.value=Y(e)):(ze.value="Некорректное значение",ze.style.color="red",ze.style.borderColor="red")}),Ae.addEventListener("click",function(){var e=parseInt(ze.value.replace(/\D+/g,""),10);1e5<=e&&(e-=5e4,ze.value=Y(e),je())}),Me.addEventListener("click",function(){var e=parseInt(ze.value.replace(/\D+/g,""),10);e<=295e4&&(e+=5e4,ze.value=Y(e),je())}),Oe.addEventListener("input",function(){Oe.value=Oe.value.replace(/[^\d]/g,"")}),Oe.addEventListener("change",function(){oe(Oe,$e,1,7)}),$e.addEventListener("change",function(){var e=parseInt($e.value.replace(/\D+/g,""),10);ee(Oe,e)}),b.addEventListener("change",je);var Fe=document.querySelector("#russia"),Pe=document.querySelector("#sng"),Re=document.querySelector("#europe"),Ve=document.querySelector(".departments__filter-form");ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.45,37.36],zoom:3,controls:[],behaviors:["drag"]}),t=ymaps.templateLayoutFactory.createClass('<div><div id="zoom-in" class="btn"><i class="icon-plus"></i></div><br><div id="zoom-out" class="btn"><i class="icon-minus"></i></div></div>',{build:function(){t.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),document.querySelector("#zoom-in").bind("click",this.zoomInCallback),document.querySelector("#zoom-out").bind("click",this.zoomOutCallback)},clear:function(){document.querySelector("#zoom-in").unbind("click",this.zoomInCallback),document.querySelector("#zoom-out").unbind("click",this.zoomOutCallback),t.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}}),a=new ymaps.control.ZoomControl({options:{layout:t}});e.controls.add(a);function n(e){for(var t=new ymaps.GeoObjectCollection({},{iconLayout:"default#image",iconImageHref:"img/marker.png"}),a=0;a<e.length;a++)t.add(new ymaps.Placemark(e[a]));return t}var l=n([[55.75,37.61],[59.93,30.31],[51.54,46],[67.61,33.66],[57.15,65.53],[54.99,73.36]]),c=n([[40.36,49.83],[41.31,69.27],[53.9,27.56],[43.23,76.94]]),o=n([[48.85,2.35],[50.08,14.42],[51.5,-.12],[41.9,12.49]]);function r(){Fe.checked?e.geoObjects.add(l):e.geoObjects.remove(l),Pe.checked?e.geoObjects.add(c):e.geoObjects.remove(c),Re.checked?e.geoObjects.add(o):e.geoObjects.remove(o)}r(),Ve.addEventListener("change",r)})});
//# sourceMappingURL=main.min.js.map
